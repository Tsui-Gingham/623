# 623
# 分步实现步骤1:搭建EA基本框架并实现OIO结构识别
-在OnInit()中初始化交易品种、K线周期等参数，声明存储OIO数据的变量
-在OnTick(）中实现新K线检测机制，确保每根K线收盘时执行逻辑
-编写OIO识别函数:检查最近3根K线是否满足(1)K1.high>=K2.high且K3.high>=K2.high(2) K1.low<=K2.Iow且K3.low<=K2.low 
-当检测到有效OIO时，计算并存储其高点(Max(K1.high,K2.high,K3.high))、低点(Min(K1.low,K2.low,K3.low))和中点((高点+低点)/2)

# 分步实现步骤2:实现初始限价单设置与风险管理
-在步骤1识别OIO后，计算高低点差((高点-低点)/tick size)
-根据点差设置手数:差≤20ticks时总手数=4(多空单各2手)，20<差<41时总手数=2(多空单各1手) 
-设置多单:开仓价=高点+tick size，止盈=开仓价+3*tick size，止损=低点-tick size
-设置空单:开仓价=低点-tick_size，止盈=开仓价-3*tick_size，止损=高点+tick_size 
-发送限价单并记录订单票号，设置订单过期时间(避免跨周期残留)

# 分步实现步骤3:实现订单触发与第二订单管理
-在OnTrade()中监控订单状态变化，当多/空单触发时: 
  a.立即取消未触发的反向订单
  b.在OIO中点设置同向第二订单(2手固定手数)
  c.第二订单止损与初始单相同(多单止损=低点-tick_size，空单止损=高点+tick_size) 
-实现订单关联机制:通过自定义注释(magic number)关联同一OIO的订单组

#分步实现步骤4:实现止盈管理与动态调整
-监控初始单平仓情况:若初始单止盈平仓，立即取消对应的第二订单(若存在) 
-当第二订单触发时:
  a.计算两订单平均成本价((单1开仓价*手数+单2开仓价*2)/总手数)
  b.将两订单止盈统一调整为:多单止盈=平均成本+3*tick_size，空单止盈=平均成本-3*tick_size 
  c.保持原始止损不变，使用OrderModify()同步更新订单参数

#分步实现步骤5:完善风控与系统健壮性
-添加错误处理机制:所有交易操作后检查GetLastError()，记录错误日志
-实现订单冲突检测:避免重复设置同一0IO结构的订单
-添加关键参数外部化(ticksize、手数规则阈值等)，支持属性窗口调整 
-在OnDeinit()中实现未决订单清理，添加调试日志输出关键操作节点
